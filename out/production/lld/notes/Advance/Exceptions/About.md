
## Exceptions

An exception is an event that occurs during the execution of a program that disrupts the normal flow of instructions. In Java, an exception is an object that wraps an error event that occurred within a method and contains:
* Information about the error including its type
* The state of the program when the error occurred
* Optionally, other custom information about the error

### Types of Exceptions

There are two types of exceptions:
* Checked exceptions are the exceptions that are checked at compile time. If some code within a method throws a checked exception, then the method must either handle the exception or it must specify the exception using throws keyword. Example: IOException, SQLException, etc. Checked exceptions are also called as compile time exceptions.
* Unchecked exceptions are the exceptions that are not checked at compiled time. In C++, all exceptions are unchecked, so it is not forced by the compiler to either handle or specify the exception. It is up to the programmers either handle them or let them propagate up. Example: ArithmeticException, NullPointerException, ArrayIndexOutOfBoundsException, etc. Unchecked exceptions are also called as runtime exceptions.


### Exception Hierarchy

![Exceptions](https://media.geeksforgeeks.org/wp-content/uploads/Exception-in-java1.png)

All exception classes are subtypes of the java.lang.Exception class. The exception class is a subclass of the Throwable class. Other than the exception class, there is another subclass called Error which is derived from the Throwable class. Errors are not normally trapped by the Java programs. These conditions normally happen in case of severe failures, which are not handled by the Java programs. Errors are generated to indicate errors generated by the runtime environment. Example: JVM is out of memory. Normally programs cannot recover from errors.

### Exception Handling

#### The throw keyword

The throw keyword is used to explicitly throw an exception. We can throw either checked or unchecked exception in java by throw keyword. The throw keyword is mainly used to throw custom exception. We will see custom exceptions later.

```java
public int getPlayerScore(String playerFile) {
    if (playerFile == null) {
        throw new IllegalArgumentException("Player file cannot be null");
    }
    Scanner contents = new Scanner(new File(playerFile));
    return Integer.parseInt(contents.nextLine());
}
```

Since IllegalArgumentException is an unchecked exception, we don’t need to declare it in the method signature. If we want to throw a checked exception, we need to declare it in the method signature.

#### The throws keyword

The simplest way to “handle” an exception is to rethrow it. This is done using the throws statement. The general form of throw is shown here:

```java
public int getPlayerScore(String playerFile) throws FileNotFoundException {
 
    Scanner contents = new Scanner(new File(playerFile));
    return Integer.parseInt(contents.nextLine());
}
```

The throws clause appears at the end of a method’s signature. It informs the caller that the method might throw an exception. If it does, then the caller must either catch the exception or rethrow it. In the preceding example, the throws clause indicates that getPlayerScore( ) might throw a FileNotFoundException. Thus, any code that calls getPlayerScore( ) must either catch the exception or declare that it also can throw it.

#### The try and catch keywords

The try statement allows you to define a block of code to be tested for errors while it is being executed. The catch statement allows you to define a block of code to be executed, if an error occurs in the try block. The try and catch keywords come in pairs:

```java
public int getPlayerScore(String playerFile) {
    try {
        Scanner contents = new Scanner(new File(playerFile));
        return Integer.parseInt(contents.nextLine());
    } catch ( FileNotFoundException noFile ) {
        logger.warn("File not found, resetting score.");
        return 0;
    }
}
```

#### The finally keyword

The finally keyword is used to create a block of code that follows a try block. A finally block of code always executes, whether or not an exception has occurred. Using a finally block allows you to run any cleanup-type statements that you want to execute, no matter what happens in the protected code.

```java
public int getPlayerScore(String playerFile)
  throws FileNotFoundException {
    Scanner contents = null;
    try {
        contents = new Scanner(new File(playerFile));
        return Integer.parseInt(contents.nextLine());
    } finally {
        if (contents != null) {
            contents.close();
        }
    }
}
```

### The golden Rules of Exception Handling
1. Never swallow an exception - Swallowing an exception means that you catch it and do nothing with it. This is a bad practice because it means that you are ignoring the fact that an error occurred, which could cause your program to behave in unexpected ways and hide bugs.
```java
try {
    // do something
} catch (Exception e) {
    System.out.println("Error: " + e.getMessage());
}
```
2. Never catch a generic exception - Catching a generic exception means that you are catching all exceptions, including runtime exceptions. This is a bad practice because it means that you are not handling exceptions in a meaningful way. You should always catch specific exceptions and handle them appropriately.
```java
try {
    // do something
} catch (Exception e) {
    System.out.println("Error: " + e.getMessage());
}
```
3. Never throw a generic exception - Throwing a generic exception means that you are throwing all exceptions, including runtime exceptions. This is a bad practice because it means that you are not handling exceptions in a meaningful way. You should always throw specific exceptions and handle them appropriately.
```java
public void doSomething() throws Exception {
    // do something
}